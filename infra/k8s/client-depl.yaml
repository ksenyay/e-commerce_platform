apiVersion: apps/v1
kind: Deployment
metadata:
  name: client-depl # Name of the deployment
spec:
  replicas: 1 # Run 1 instance of the app
  selector:
    matchLabels:
      app: client # Select pods with label "app: client"
  template: # Template for creating pods
    metadata:
      labels:
        app: client # Label assigned to each pod
    spec:
      containers:
        - name: client # Container name
          image: ksenyay/client:latest # Docker image to use
          imagePullPolicy: Never
          ports:
            - containerPort: 3000 # Port the app listens on inside container
---
apiVersion: v1
kind: Service
metadata:
  name: client-srv # Name of the service
spec:
  selector:
    app: client # Route traffic to pods with label "app: client"
  ports:
    - protocol: TCP
      port: 3000 # External port (what you connect to)
      targetPort: 3000 # Internal port (container port)
